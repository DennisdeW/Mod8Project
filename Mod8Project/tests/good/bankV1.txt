program bankV1(10);

shared int account = 1000;
shared int doneCount = 0;

def int main() {
	if ($SPID < 5) {
		for (int i = 0; i < 10; i = i + 1) {
			addToAccount(i * 10);
		}
	} else {
		for (int i = 0; i < 10; i = i + 1) {
			takeFromAccount(i * 10);
		}
	}
	lock(done_lock) {
		doneCount = doneCount + 1;
	}
	if ($SPID == 0) {
		while (doneCount < 10){}
		if (account == 1000) {
			out(0);
		} else {
			out(1);
		}
	}
	return 0;
}

def void addToAccount(int amt) {
	lock(acc_lock) {
		account = account + amt;
	}
	return;
}

def void takeFromAccount(int amt) {
	lock(acc_lock) {
		account = account - amt;
	}
	return;
}